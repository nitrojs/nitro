---
icon: ri:file-code-line
---

# Custom Preset

::alert{type="warning"}
**Advanced**
:br
This is an advanced feature.
::

If you want to use a provider that Nitro doesn't support, or want to modify an existing one, you can create a custom preset.
To create a custom preset, you need to use the `defineNitroPreset` helper, and specify a runtime entry point.

```ts [custom-preset.ts]
import { defineNitroPreset } from 'nitropack';
import { fileURLToPath } from 'node:url'

export default defineNitroPreset({
    entry: fileURLToPath(new URL('./custom-entry.ts', import.meta.url))
});
```

In your entry point, use the virtual files to access the Nitro App.
The entry point will be used by your server or provider, and you can fully customise its behaviour.

```ts [custom-entry.ts]
import '#internal/nitro/virtual/polyfill';
import { nitroApp } from "#internal/nitro/app";

export default {
  async fetch(
    request: Request, // CFRequest,
    env: CFModuleEnv,
    context: ExecutionContext
  ) {
    //const response = await nitroApp.localFetch() <- Use localFetch to access your nitro application.
    return new Response("Hello world !")
  }.
};
```

Refer to the Nitro [source code](https://github.com/unjs/nitro/) directly to have a better understanding of presets and entry points.

Here are two community examples of custom presets :

- [Lambda-edge](https://github.com/jdevdevdev/nuxt-sst/blob/lambda-edge@%7B2023-07-03T11:20:03Z%7D/nuxt-app/server/nitro/preset/entry.ts)
- [Fastify plugin](https://github.com/auguwu/fastify-nitro)
